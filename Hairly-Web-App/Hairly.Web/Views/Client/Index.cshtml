@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Hairly.Web.ViewModels.Client

@model IEnumerable<ClientIndexViewModel>

@{
    ViewData["Title"] = "Clients";
}

<div class="container-fluid">
	@if (TempData["SuccessMessage"] != null)
	{
		<div class="alert alert-success alert-dismissible fade show mb-4" role="alert">
			<i class="bi bi-check-circle-fill me-2"></i>
			@TempData["SuccessMessage"]
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	}
	<div class="row mb-4">
		<div class="col">
			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h1 class="display-6 fw-bold mb-1">
						<i class="bi bi-people-fill text-primary me-2"></i>Clients
					</h1>
					<p class="text-muted mb-0">Manage your client database</p>
				</div>
				<div>
					<a asp-action="Create" class="btn btn-primary btn-lg">
						<i class="bi bi-person-plus me-2"></i>Add New Client
					</a>
				</div>
			</div>
		</div>
	</div>

	@if (!Model.Any())
	{
		<div class="row">
			<div class="col-lg-6 mx-auto">
				<div class="card border-0 shadow-sm text-center py-5">
					<div class="card-body">
						<i class="bi bi-people text-muted mb-3" style="font-size: 4rem; opacity: 0.3;"></i>
						<h3 class="h5 mb-3">No clients yet</h3>
						<p class="text-muted mb-4">Start building your client base by adding your first client.</p>
						<a asp-action="Create" class="btn btn-primary">
							<i class="bi bi-person-plus me-2"></i>Add Your First Client
						</a>
					</div>
				</div>
			</div>
		</div>
	}
	else
	{
		<div class="row">
			<div class="col">
				<div class="card border-0 shadow-sm">
					<div class="card-body p-0">
						<div class="table-responsive">
							<table class="table table-hover align-middle mb-0">
								<thead class="table-light">
								<tr>
									<th class="px-4 py-3">Name</th>
									<th class="py-3">Phone</th>
									<th class="py-3">Email</th>
									<th class="py-3 text-center">Appointments</th>
									<th class="py-3 text-end px-4">Actions</th>
								</tr>
								</thead>
								<tbody>
								@foreach (var client in Model)
								{
									<tr>
										<td class="px-4 py-3">
											<div class="d-flex align-items-center">
												<div class="avatar-circle bg-primary bg-gradient text-white d-flex align-items-center justify-content-center me-3"
												     style="width: 40px; height: 40px; border-radius: 50%; font-weight: 600;">
													@client.FirstName.Substring(0, 1).ToUpper()@client.LastName.Substring(0, 1).ToUpper()
												</div>
												<div>
													<div class="fw-semibold">@client.FullName</div>
												</div>
											</div>
										</td>
										<td class="py-3">
											<i class="bi bi-telephone me-2 text-muted"></i>@client.PhoneNumber
										</td>
										<td class="py-3">
											@if (!string.IsNullOrEmpty(client.Email))
											{
												<i class="bi bi-envelope me-2 text-muted"></i>
												@client.Email
											}
											else
											{
												<span class="text-muted fst-italic">No email</span>
											}
										</td>
										<td class="py-3 text-center">
											<span class="badge bg-info bg-gradient rounded-pill px-3 py-2">
												@client.TotalAppointments
											</span>
										</td>
										<td class="py-3 text-end px-4">
											<div class="btn-group" role="group">
												<a asp-action="Details" asp-route-id="@client.Id"
												   class="btn btn-sm btn-outline-primary" title="View Details">
													<i class="bi bi-eye"></i>
												</a>
												<a asp-action="Edit" asp-route-id="@client.Id"
												   class="btn btn-sm btn-outline-secondary" title="Edit">
													<i class="bi bi-pencil"></i>
												</a>
												<a asp-action="Delete" asp-route-id="@client.Id"
												   class="btn btn-sm btn-outline-danger" title="Delete">
													<i class="bi bi-trash"></i>
												</a>
											</div>
										</td>
									</tr>
								}
								</tbody>
							</table>
						</div>
					</div>
					<div class="card-footer bg-light border-0 px-4 py-3">
						<div class="text-muted">
							<i class="bi bi-info-circle me-2"></i>
							Total clients: <strong>@Model.Count()</strong>
						</div>
					</div>
				</div>
			</div>
		</div>
	}
</div>

<style>
    .table > tbody > tr:hover {
        background-color: rgba(0, 0, 0, 0.02);
    }

    .btn-group .btn {
        padding: 0.25rem 0.75rem;
    }
</style>
